<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameVerse Digital Store</title>
    <!-- Load Tailwind CSS for rapid, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for visual appeal */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Dark background for gaming theme */
            color: #e4e4e7;
        }
        .game-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="min-h-screen">

<!-- Header & Navigation -->
<header class="bg-gray-800 shadow-lg sticky top-0 z-10">
    <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
        <h1 class="text-3xl font-bold text-pink-500">GameVerse</h1>
        <div class="flex space-x-4 items-center">
            <input type="text" id="search-input" placeholder="Search by title..." class="px-4 py-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500">
            <button onclick="fetchGames()" class="bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md">Search</button>
            <a href="#cart" class="text-gray-300 hover:text-pink-500 transition duration-200">
                <svg class="w-6 h-6 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                Cart (<span id="cart-count">0</span>)
            </a>
            <button id="login-btn" onclick="toggleLogin()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">Login</button>
        </div>
    </nav>
</header>

<!-- Main Content Area -->
<main class="container mx-auto p-8">
    <h2 class="text-4xl font-extrabold mb-8 text-white">Featured Games Across All Platforms</h2>

    <!-- Filter/Sorting Section -->
    <div class="flex space-x-4 mb-8">
        <select id="platform-filter" class="p-2 rounded-lg bg-gray-700 text-white">
            <option value="">All Platforms</option>
            <option value="PC">PC</option>
            <option value="PS5">PlayStation 5</option>
            <option value="XBOX">Xbox</option>
        </select>
        <!-- Add Genre Filter here -->
    </div>

    <!-- Game Listing Area (Where JavaScript injects cards) -->
    <div id="game-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
        <!-- Placeholder for games - populated by loadGames() JS function -->
        <div class="game-card bg-gray-800 rounded-xl overflow-hidden shadow-xl">
            <img src="https://placehold.co/400x250/333333/ffffff?text=Loading+Game" alt="Game Title" class="w-full h-40 object-cover">
            <div class="p-4">
                <h3 class="text-xl font-semibold mb-2">Placeholder Title</h3>
                <p class="text-pink-400 font-bold mb-3">$59.99</p>
                <p class="text-sm text-gray-400 mb-4">Platform: PC</p>
                <button class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 rounded-lg transition duration-200">Add to Cart</button>
            </div>
        </div>
        <!-- More placeholder cards... -->
    </div>
</main>

<!-- Modal for Login/Registration (Hidden by default) -->
<div id="auth-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-md">
        <h3 class="text-2xl font-bold mb-6 text-white" id="auth-title">Login</h3>
        <form id="auth-form" onsubmit="handleAuth(event)">
            <div class="mb-4">
                <label for="username" class="block text-sm font-medium text-gray-400">Username</label>
                <input type="text" id="username" name="username" required class="w-full px-3 py-2 mt-1 rounded-lg bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-pink-500">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-sm font-medium text-gray-400">Password</label>
                <input type="password" id="password" name="password" required class="w-full px-3 py-2 mt-1 rounded-lg bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-pink-500">
            </div>
            <button type="submit" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 rounded-lg transition duration-200">Submit</button>
            <p class="mt-4 text-center text-sm text-gray-400">
                <span id="toggle-auth" class="cursor-pointer text-blue-400 hover:underline" onclick="toggleMode()">Need an account? Register</span>
            </p>
        </form>
        <button onclick="document.getElementById('auth-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button>
    </div>
</div>


<script>
    // --- Full Stack Developer Focus: JS to Java Backend Interaction ---

    // Mock API Endpoint (In a real app, this would be your Java Web Server endpoint)
    const JAVA_BACKEND_URL = '/api/GameVerse';

    let cartItems = [];

    // Function to simulate fetching data from the Java Backend
    async function fetchGames() {
        // This is the core AJAX call. Java will execute GameDataAPIService.java logic.
        const query = document.getElementById('search-input').value;
        const platform = document.getElementById('platform-filter').value;

        // In CAT201, this Fetch call would hit your Java Servlet/Controller.
        // Example: const response = await fetch(`${JAVA_BACKEND_URL}/games?q=${query}&platform=${platform}`);

        // --- MOCK DATA for Skeleton ---
        const mockGames = [
            { id: 'g001', title: 'Cyberpunk 2077', platform: 'PC', price: 29.99, imageUrl: 'https://placehold.co/400x250/cc0000/ffffff?text=PC+Cyberpunk' },
            { id: 'g002', title: 'The Last of Us Part 1', platform: 'PS5', price: 69.99, imageUrl: 'https://placehold.co/400x250/003366/ffffff?text=PS5+TLoU' },
            { id: 'g003', title: 'Halo Infinite', platform: 'XBOX', price: 19.99, imageUrl: 'https://placehold.co/400x250/008000/ffffff?text=XBOX+Halo' },
        ];

        renderGames(mockGames);
    }

    function renderGames(games) {
        const listElement = document.getElementById('game-list');
        listElement.innerHTML = ''; // Clear existing content

        games.forEach(game => {
            const card = `
                    <div class="game-card bg-gray-800 rounded-xl overflow-hidden shadow-xl border-t-4 border-${game.platform === 'PC' ? 'pink' : game.platform === 'PS5' ? 'blue' : 'green'}-500">
                        <img src="${game.imageUrl}" alt="${game.title}" class="w-full h-40 object-cover">
                        <div class="p-4">
                            <h3 class="text-xl font-semibold mb-2 text-white">${game.title}</h3>
                            <p class="text-${game.platform === 'PC' ? 'pink' : game.platform === 'PS5' ? 'blue' : 'green'}-400 font-bold mb-3">$${game.price.toFixed(2)}</p>
                            <p class="text-sm text-gray-400 mb-4">Platform: ${game.platform}</p>
                            <button onclick="addToCart('${game.id}', '${game.title}')" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 rounded-lg transition duration-200">Add to Cart</button>
                        </div>
                    </div>
                `;
            listElement.innerHTML += card;
        });
    }

    function addToCart(gameId, title) {
        cartItems.push({ id: gameId, title: title });
        document.getElementById('cart-count').innerText = cartItems.length;

        // In a full implementation, this would send an AJAX request to the Java backend
        // to update the user's persistent cart data.
        console.log(title + " added to cart. Current cart:", cartItems);
    }

    // --- User/Admin Authentication Functions ---
    function toggleLogin() {
        document.getElementById('auth-modal').classList.toggle('hidden');
    }

    function toggleMode() {
        const title = document.getElementById('auth-title');
        const toggleText = document.getElementById('toggle-auth');
        if (title.innerText === 'Login') {
            title.innerText = 'Register';
            toggleText.innerHTML = 'Already have an account? Login';
        } else {
            title.innerText = 'Login';
            toggleText.innerHTML = 'Need an account? Register';
        }
    }

    async function handleAuth(event) {
        event.preventDefault();
        const form = event.target;
        const username = form.username.value;
        const password = form.password.value;
        const isLogin = document.getElementById('auth-title').innerText === 'Login';

        // This is where JS sends data to Java (AuthService.java)
        // Example: await fetch(`${JAVA_BACKEND_URL}/${isLogin ? 'login' : 'register'}`, { ... })

        // Mock success:
        console.log(`${isLogin ? 'Logging in' : 'Registering'} user: ${username}`);
        // In production: Close modal on successful response from Java
        document.getElementById('auth-modal').classList.add('hidden');
        document.getElementById('login-btn').innerText = 'Welcome, ' + username;
    }

    // Initial load
    window.onload = fetchGames;
</script>
</body>
</html>